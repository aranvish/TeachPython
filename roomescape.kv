#:kivy 1.8.0



[Popup_Button@ImgBtn]:
    source: ctx.img
    size_hint: ctx.s_hint
    pos: ctx.pos
    on_press:
        root.dispPop(ctx.which_widg)
   
<textPopUp@Popup>:
    title: 'TestApp'
    size: 300, 400
    size_hint: None, None
    id: Input
    
    BoxLayout:
        orientation: 'vertical'
        TextInput:
            text: root.text
            size_hint: 1, None
            height: 285
            id: code

        BoxLayout:
            orientation: 'horizontal'

            Button:
                text: 'Try Code!'
                size_hint_x: 0.5
                size_hint_y: None
                height: 50
                on_release:
                    Input.textBind(code.text)

            Button:
                text: 'close me'
                size_hint_x: 0.5
                size_hint_y: None
                height: 50
                on_release:
                    Input.dismiss()

    

                
<FrontScreen>:
    FloatLayout:
        Image:
            source: 'Assets_Room.png'
            size: self.size  
        ImgBtn:
            source: 'assets_arrows_left.png'
            text: 'go left'
            size_hint: .2,.2
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'left'
            pos: 600,100
        ImgBtn:
            source: 'assets_arrows_right.png'
            size_hint: .2,.2
            text: 'go right'
            pos: 1,100
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'right'
        Popup_Button:
            img: 'Assets_Door2.png'
            s_hint: .2, .5
            pos: 300, 140
            which_widg: 'DoorButton'

   
            

<LeftScreen>:
    FloatLayout:   
        Image:
            source: 'Assets_Room.png'
            size: self.size  
        ImgBtn:
            source: 'Assets_Candle.png'
            size_hint: .01, .2
            pos: 200, 300
            on_press: root.manager.current = 'right'
        Image:
            source: "Assets_Terminal2.png"
        ImgBtn:
            source: 'assets_arrows_left.png'
            text: 'go left'
            size_hint: .2,.2
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'back'
            pos: 600,100
        ImgBtn:
            source: 'assets_arrows_right.png'
            size_hint: .2,.2
            text: 'go right'
            pos: 1,100
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'front'

<RightScreen>:
    FloatLayout:  
        Image:
            source: 'Assets_Room.png'
            size: self.size 
        ImgBtn:
            source: 'assets_arrows_left.png'
            text: 'go left'
            size_hint: .2,.2
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'front'
            pos: 600,100
        ImgBtn:
            source: 'assets_arrows_right.png'
            size_hint: .2,.2
            text: 'go right'
            pos: 1,100
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'back'
        Image:
            source: 'Assets_Table.png'
            size_hint: .75, .45
            pos: 90, 70
        Popup_Button:
            img: 'Assets_Lamp.png'
            s_hint: 1,1
            pos: 1, 20
            which_widg: 'LampButton'


<BackScreen>:
    FloatLayout:
        Image:
            source: 'Assets_Room.png'
            size: self.size
        ImgBtn:
            source: 'assets_arrows_left.png'
            text: 'go left'
            size_hint: .2,.2
            on_press: 
                root.manager.transition.direction = 'left'
                root.manager.current = 'right'
            pos: 600,100
        ImgBtn:
            source: 'assets_arrows_right.png'
            size_hint: .2,.2
            text: 'go right'
            pos: 1,100
            on_press: 
                root.manager.transition.direction = 'right'
                root.manager.current = 'left'



<BackgroundScreenManager>
    canvas.before:
        BorderImage:
            texture: self.bk_img.texture
            pos: self.pos
            size: self.size